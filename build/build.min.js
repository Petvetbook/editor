"undefined"==typeof exports&&!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):"object"==typeof exports?e(require("jquery"),require("./vendor/jquery.ui.widget")):e(window.jQuery)}(function(e){"use strict";function t(t){var n="dragover"===t;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var r=i.dataTransfer;r&&-1!==e.inArray("Files",r.types)&&this._trigger(t,e.Event(t,{delegatedEvent:i}))!==!1&&(i.preventDefault(),n&&(r.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){return t.isDefaultPrevented()?!1:void((n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(t-this.loaded)*(1e3/i)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var i,r=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&r-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=r,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(r,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,i=this,r=t.files[0],o=t.multipart||!e.support.xhrFileUpload,a="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",r)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:a,value:t.blob}):e.each(t.files,function(i,r){n.push({name:"array"===e.type(t.paramName)&&t.paramName[i]||a,value:r})})):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(a,t.blob,r.name):e.each(t.files,function(r,o){(i._isInstanceOf("File",o)||i._isInstanceOf("Blob",o))&&n.append("array"===e.type(t.paramName)&&t.paramName[r]||a,o,o.uploadName||o.name)})),t.data=n):(t.contentType=r.type||"application/octet-stream",t.data=t.blob||r),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)i.push(n),r-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var r=e.Deferred(),o=r.promise();return n=n||this.options.context||o,t===!0?r.resolveWith(n,i):t===!1&&r.rejectWith(n,i),o.abort=r.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,n){var i=this,r=function(t){return e.Deferred().resolveWith(i,t).promise()};n.process=function(t,o){return(t||o)&&(n._processQueue=this._processQueue=(this._processQueue||r([this])).then(function(){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():r(arguments)}).then(t,o)),this._processQueue||r([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,r,o=this,a=t.files[0],s=a.size,l=t.uploadedBytes,c=t.maxChunkSize||s,d=this._blobSlice,u=e.Deferred(),p=u.promise();return this._isXHRUpload(t)&&d&&(l||s>c)&&!t.data?n?!0:l>=s?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(r=function(){var n=e.extend({},t),p=n._progress.loaded;n.blob=d.call(a,l,l+c,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+s,o._initXHRData(n),o._initProgressListener(n),i=(o._trigger("chunksend",null,n)!==!1&&e.ajax(n)||o._getXHRPromise(!1,n.context)).done(function(i,a,c){l=o._getUploadedBytes(c)||l+n.chunkSize,p+n.chunkSize-n._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=a,n.jqXHR=c,o._trigger("chunkdone",null,n),o._trigger("chunkalways",null,n),s>l?r():u.resolveWith(n.context,[i,a,c])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,o._trigger("chunkfail",null,n),o._trigger("chunkalways",null,n),u.rejectWith(n.context,[e,t,i])})},this._enhancePromise(p),p.abort=function(){return i.abort()},r(),p):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,r){var o=r._progress.total,a=r._response;r._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r),a.result=r.result=t,a.textStatus=r.textStatus=n,a.jqXHR=r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(e,t,n,i){var r=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),r.jqXHR=i.jqXHR=e,r.textStatus=i.textStatus=t,r.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,r,o,a,s=this,l=s._getAJAXSettings(n),c=function(){return s._sending+=1,l._bitrateTimer=new s._BitrateTimer,i=i||((r||s._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&s._getXHRPromise(!1,l.context,r)||s._chunkedUpload(l)||e.ajax(l)).done(function(e,t,n){s._onDone(e,t,n,l)}).fail(function(e,t,n){s._onFail(e,t,n,l)}).always(function(e,t,n){if(s._onAlways(e,t,n,l),s._sending-=1,s._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),a=o.then(c)):(this._sequence=this._sequence.then(c,c),a=this._sequence),a.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(o&&o.rejectWith(l.context,r),c())},this._enhancePromise(a)):c()},_onAdd:function(t,n){var i,r,o,a,s=this,l=!0,c=e.extend({},this.options,n),d=n.files,u=d.length,p=c.limitMultiFileUploads,f=c.limitMultiFileUploadSize,h=c.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(c),v=0;if(!u)return!1;if(f&&void 0===d[0].size&&(f=void 0),(c.singleFileUploads||p||f)&&this._isXHRUpload(c))if(c.singleFileUploads||f||!p)if(!c.singleFileUploads&&f)for(o=[],i=[],a=0;u>a;a+=1)m+=d[a].size+h,(a+1===u||m+d[a+1].size+h>f||p&&a+1-v>=p)&&(o.push(d.slice(v,a+1)),r=g.slice(v,a+1),r.length||(r=g),i.push(r),v=a+1,m=0);else i=g;else for(o=[],i=[],a=0;u>a;a+=p)o.push(d.slice(a,a+p)),r=g.slice(a,a+p),r.length||(r=g),i.push(r);else o=[d],i=[g];return n.originalFiles=d,e.each(o||d,function(r,a){var c=e.extend({},n);return c.files=o?a:[a],c.paramName=i[r],s._initResponseObject(c),s._initProgressObject(c),s._addConvenienceMethods(t,c),l=s._trigger("add",e.Event("add",{delegatedEvent:t}),c)}),l},_replaceFileInput:function(t){var n=t.fileInput,i=n.clone(!0),r=n.is(document.activeElement);t.fileInputClone=i,e("<form></form>").append(i)[0].reset(),n.after(i).detach(),r&&i.focus(),e.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===n[0]?i[0]:t}),n[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,n){var i,r=this,o=e.Deferred(),a=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])},s=function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){o.resolve(e)}).fail(a)},l=function(){i.readEntries(function(e){e.length?(c=c.concat(e),l()):s(c)},a)},c=[];return n=n||"",t.isFile?t._file?(t._file.relativePath=n,o.resolve(t._file)):t.file(function(e){e.relativePath=n,o.resolve(e)},a):t.isDirectory?(i=t.createReader(),l()):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n,i,r=t.prop("webkitEntries")||t.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(n=e.makeArray(t.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(i=t.prop("value"),!i)return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(r){i.files=r,n.options.replaceFileInput&&n._replaceFileInput(i),n._trigger("change",e.Event("change",{delegatedEvent:t}),i)!==!1&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),i)!==!1&&this._onAdd(t,i))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,i=t.dataTransfer,r={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i,n._trigger("drop",e.Event("drop",{delegatedEvent:t}),r)!==!1&&n._onAdd(t,r)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,i=this.element.data();e.each(this.element[0].attributes,function(e,r){var o,a=r.name.toLowerCase();/^data-/.test(a)&&(a=a.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),o=i[a],t._isRegExpOption(a,o)&&(o=t._getRegExp(o)),n[a]=o)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,r=this,o=e.Deferred(),a=o.promise();return a.abort=function(){return i=!0,n?n.abort():(o.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!i){if(!e.length)return void o.reject();t.files=e,n=r._onSend(null,t),n.then(function(e,t,n){o.resolve(e,t,n)},function(e,t,n){o.reject(e,t,n)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=(e.isNode,e.realm),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();RegExp.prototype.execAll=function(e){for(var t=null,n=new Array;t=this.exec(e);){var r=[];for(i in t)parseInt(i)==i&&r.push(t[i]);n.push(r)}return n},n.module("morrr.editor.utils.lodash",function(){return require("lodash")}),n.module("morrr.editor.utils.Promise",function(){return require("promise")}),n.module("morrr.editor.utils.sharedImagePath",function(){return function(e,t){return IMAGE_SERVER_FULL+e+"?width="+(t||150)+"&height="+(t||150)+"&mode=crop&quality=80"}}),n.module("morrr.editor.Engine",["morrr.editor.bbcode.BBCodeEngine","morrr.editor.bbcode.Generator","morrr.editor.bbcode.BBCodeExtractor","morrr.editor.bbcode.BBCodeHandlers","morrr.editor.utils.lodash"],function(e,t,n,i,r){var o,a=function(){};return a.prototype={initialize:function(e,t){this.opts=t||{},this.toolbarConfig=t.toolbar||[],this.element=$('<div class="sane-editor"></div>'),this.toolbar=$('<div class="toolbar-wrapper"><div class="ui icon buttons"></div></div>'),this.toolbar.appendTo(this.element),this.content=$('<div class="content sane-editor-content-unique-div" contenteditable="true"></div>').appendTo(this.toolbar),this.content.appendTo(this.element),e.replaceWith(this.element),this.inializeToolbar(),this.fixCloningFeature();var n=this;this.setValue(""),$(this.content).bind("paste",function(e){var t=($(e.currentTarget),e.originalEvent.clipboardData.getData("Text")),i=n.trimText(t);e.originalEvent.preventDefault(),n.execCommand("insertHTML",!1,"<x></x><div>"+i+"</div>")})},onActivity:function(e){this.activity_cb=e},triggerActivity:function(){this.activity_cb&&this.activity_cb()},trimText:function(e,t){return e=e.replace(new RegExp(String.fromCharCode(160),"g")," "),e=e.replace(/\s+/g," "),t&&(e=e.trim()),e},getValue:function(){return this.generate()},generate:function(){return t(this)},toolbarIconClick:function(e){var t=this;if(t.triggerActivity(),r.isFunction(e)){var n=t.getRange();if(n){var i,o=n.commonAncestorContainer,a=$(o).parent(),s=$(o).parents(".sane-editor .content");s[0]?(a.hasClass("content")&&(i=o),e.apply(t,[i,a,n])):e.apply(t,[null,null,n])}}},showError:function(e){this.element.find(".notification").remove();var t=$('<div class="notification"><div class="text"><i class="ui icon warning sign"></i>'+e+"</div></div>");t.hide(),t.insertBefore(this.content),t.fadeIn({duration:200,queue:!1}).css("display","none").slideDown(200,function(){setTimeout(function(){t.show(),t.fadeOut({duration:200,queue:!1}).css("display","block").slideIn(200,function(){t.remove()})},2e3)})},createModal:function(e){this.element.find(".sane-modal").remove();var t=$('<div class="sane-modal"><div class="header">'+e+'</div><div class="modal-content"></div></div>');return t.insertBefore(this.content),{element:t,close:function(){t.remove()}}},smartRangeDetect:function(e){var t=this;return new Promise(function(n,i){var o=t.getRange();if(o){var a=[],s=0,l=o.endContainer.innerHTML||o.endContainer.nodeValue,c=!1,d=function(e){if(e){var t=$(e).parents(".sane-editor-content-unique-div")[0],n=$(e).parents(".wrapper-editable-area")[0];if(!t)throw{message:"Your selection should be within editor area!"};if($(e).parents(".wrapper")[0]||n)throw{message:"You can't use text within formatted blocks"}}if(void 0==e)return!1;var i=!1,r=e.nodeValue||e.innerHTML;return void 0!==r&&(i=r===l,c||a.push(e),!c&&i&&(c=!0)),i},u=function v(e){if(d(e))return a;for(;e;){var e=e.nextSibling;if(d(e))return e=null,a;if(!c&&e&&e.childNodes.length&&v(e.childNodes[0]),s++,s>100)return a}return e},p=o.startContainer;if(3===o.startContainer.nodeType&&1===o.startContainer.parentNode.childNodes.length){p=o.startContainer.parentNode;var f=o.endContainer.nodeValue||o.endContainer.innerHTML,h=o.startContainer.nodeValue||o.startContainer.innerHTML;f===h&&(a=[o.endContainer.nodeValue?o.endContainer.parentNode:o.endContainer])}var m=[],g=[];return 0===a.length?(u(p),r.each(a,function(e){e.childNodes&&0!==e.childNodes.length?e.childNodes&&1===e.childNodes.length&&(g.push(e),m.push($(e).text())):(g.push(e),m.push($(e).text()))})):r.each(a,function(e){g.push(e),m.push($(e).text())}),e.apply(t,[{range:o,text:m,elements:g,inject:function(e){t.triggerActivity();var n=$(o.endContainer);if(n.parent(".content")[0]||$(o.endContainer).hasClass("content"))o.insertNode(e);else{for(var i,r=!1,a=n.parent(),s=0;!r&&50>s;)a.hasClass("content")?r=!0:(i=a,a=a.parent()),s++;r&&i[0]&&$(e).insertBefore(i)}}}])}t.showError("You need to select something")})},inializeToolbar:function(){var e,t=this,n=function(n,i){n.mouseover(function(r){var o=n.position();e=$('<div class="toolbar-hint">'+i+"</div>"),e.appendTo(t.toolbar),e.css({top:o.top+35+"px",left:o.left+"px",position:"absolute"})}),n.mouseout(function(){e&&e.remove()})};r.each(this.toolbarConfig,function(e){var r=i[e];if(r){var o=$('<div class="ui button"><i class="icon"></i></div>');o.find("i").addClass(r.icon),r.hint&&n(o,r.hint),$(t.toolbar).find(".buttons").append(o),o.click(function(){r.cmd?t.toolbarIconClick(r.cmd):"",r.cmdSmart&&t.smartRangeDetect(r.cmdSmart).then(function(){})["catch"](function(e){t.showError(e.message)})})}});var o=$('<div class="ui button"><i class="icon maximize"></i></div>');o.appendTo($(t.toolbar).find(".buttons")),o.click(function(){t.toggleFullScreenMode()}),n(o,"Full screen"),this.bindFullScreenButtons()},basicStringWrapper:function(e,t){if(!$(e).parents(".wrapper")[0]){t=t||{};var n="wrapper",i="";t.service&&(n+=" sane-editor-service",i=' data-service="'+t.service+'" ');var o=['<div class="'+n+'" '+i+' contenteditable="false">'];o.push('<div class="user-controls">'),o.push('<i class="ui icon remove"></i>'),o.push("</div>"),o.push('<div class="user-content">'),o.push("</div>"),o.push("</div>");var a=$(o.join("")),s=$(e).clone();a.find(".user-content").append(s);var l=s.html();return s.empty(),s.append("<div class='wrapper-editable-area' contenteditable='true'>"+l+"</div>"),$(e).replaceWith(a),a.find(".remove").click(function(){r.isFunction(t.onRemove)&&t.onRemove(a)}),{element:a}}},basicModuleWrapper:function(e,t){if(!$(e).parents(".wrapper")[0]){t=t||{};var n="wrapper",i="";t.service&&(n+=" sane-editor-service",i=' data-service="'+t.service+'" ');var o=['<div class="'+n+'" '+i+' contenteditable="false">'];o.push('<div class="user-controls">'),o.push('<i class="ui icon remove"></i>'),o.push("</div>"),o.push('<div class="user-content">'),o.push("</div>"),o.push("</div>");var a=$(o.join("")),s=$(e).clone();return a.find(".user-content").append(s),$(e).replaceWith(a),a.find(".remove").click(function(){r.isFunction(t.onRemove)&&t.onRemove(a)}),t.onReady&&t.onReady(a[0]),{element:a}}},setValue:function(t){this.content.empty(),e.toEditor("<x></x>"+t+"<x></x>",this)},getSelection:function(e){return e=e||{},e.focus!==!1&&this.content[0].focus(),document.getSelection()},getRange:function(e){var t=this.getSelection(e);if(!t)return null;if(t.getRangeAt&&t.rangeCount>0){var n=t.getRangeAt(0);return n}if(t.createRange){var i=t.createRange();return i}return null},execCommand:function(e,t,n){this.triggerActivity(),this.content.focus(),document.execCommand(e,t||!1,n||null)},setCaretPosition:function(e,t){if(null!==e){var n=this.getRange(),i=this.getSelection();n&&(n.setStart(e,1),n.collapse(!0),i.removeAllRanges(),i.addRange(n))}},bindFullScreenButtons:function(){var e=this;this.floatingSave=$('<div class="circular ui icon button primary small floating-save"><i class="icon save"></i></div>'),this.floatingPreview=$('<div class="circular ui icon button small floating-preview"><i class="icon zoom"></i></div>'),this.floatingPreview.click(function(){e.onFloatingPreview&&e.onFloatingPreview()}),e.exitFullScreenModeButton=$('<div class="circular ui icon button small floating-exit"><i class="icon angle double down"></i></div>'),e.exitFullScreenModeButton.click(function(){e.toggleFullScreenMode()}),this.floatingSave.click(function(){e.onFloatingSave&&(e.onFloatingSave(),e.floatingSave.removeClass("primary").addClass("green"),e.floatingSave.find("i").removeClass("save").addClass("checkmark"),e.floatingSave.animate({zoom:1.2},{duration:100,complete:function(){e.floatingSave.animate({zoom:1},{duration:100,complete:function(){setTimeout(function(){e.floatingSave.removeClass("green").addClass("primary"),e.floatingSave.find("i").removeClass("checkmark").addClass("save")},500)}})}}))}),this.element.append(this.floatingSave),this.element.append(this.floatingPreview),this.element.append(e.exitFullScreenModeButton)},toggleFullScreenMode:function(){$(this.element).hasClass("full-screen-mode")?($(this.element).removeClass("full-screen-mode"),$("body").css("overflow","auto"),this.floatingSave.hide(),this.floatingPreview.hide(),this.exitFullScreenModeButton.hide()):($("body").css("overflow","hidden"),$(this.element).addClass("full-screen-mode"),this.floatingSave.show(),this.floatingPreview.show(),this.exitFullScreenModeButton.show())},fixCloningFeature:function(){var e=this;$(this.content).bind("keydown",function(t){e.triggerActivity(),tabPressed=!1;var n=e.getRange({focus:!1});if(n){var i=$(n.commonAncestorContainer),o=i.parents(".wrapper");if(o.hasClass("capture-keyboard-interaction")){var a=$("<div></br></div>");return a.insertAfter(o),void e.setCaretPosition(a[0],1)}if(13===t.keyCode&&o[0]){3===i[0].nodeType&&(i=i.parent());var s=""===$(i).text(),l=0,c=[];i.prevAll().each(function(){c.push(this)}),c.reverse();var d=[];if(r.each(c,function(e){""===$(e).text()?(l++,d.push(e)):(d=[],l=0)}),s&&(d.push(i),l++),2===l){if(d.length>0){var u=d[d.length-1];u&&$(u).nextAll().insertAfter(o)}r.each(d,function(e){$(e).remove()});var a=$("<div></br></div>");a.insertAfter(o),e.setCaretPosition(a[0],1)}}}})}},o=a}),n.module("morrr.editor.Gallery",["morrr.editor.utils.lodash","morrr.editor.utils.sharedImagePath","morrr.editor.bbcode.BBCodeEngine"],function(e,t,n){var i,r=function(n,i,r){var o=n.createModal("Insert image"),a=$('<div class="images"></div>'),s=o.element.find(".modal-content"),l=$('<div class="multiupload"></div>'),c=$('<div class="actions"><div class="ui button cancel">Cancel</div><div class="ui button primary okay">Insert</div></div>');l.appendTo(s),a.appendTo(s),c.appendTo(o.element);var d=[],u=$('<div class="image"><div class="ui active large inline loader image-loader"></div></div>'),p=function(){a.empty(),$.get("/sys/user_images?parent="+n.parentId,function(n){var i;e.each(n,function(n){var r=$('<div class="image"><img src="'+t(n.image,70)+'"/></div>');r.appendTo(a),r.data("item",n),i={item:n,image:r},r.click(function(){var t=$(this).data("item");if(e.indexOf(d,t.image)>-1){e.remove(d,function(e){return t.image===e}),r.removeClass("selected")}else d.push(t.image),r.addClass("selected")})}),i&&(i.image.addClass("selected"),d.push(i.item.image))})};p(),c.find(".cancel").click(function(){o.close()}),c.find(".okay").click(function(){r(d),o.close()}),l.uploadFile({url:"/api/editor/upload?parentId="+n.parentId,multiple:!0,fileName:"myfile",showProgress:!0,onSubmit:function(e,t){a.append(u)},afterUploadAll:function(){u.remove(),$.get("/api/editor/images",{parent:i},function(){p()})}})};return i=r}),n.module("morrr.editor.utils",["morrr.editor.utils.lodash"],function(e){var n,i=function(){function n(){t(this,n)}return r(n,null,[{key:"stringInject",value:function(e,t,n,i){return e.slice(0,t)+i+e.slice(t+Math.abs(n))}},{key:"replaceEmptyLines",value:function(t){var n=t.split(/\n/),i=[];return e.each(n,function(e,t){e.length>0&&!e.match(/^\s+$/)&&(0!==t||"[/br]"!==e)&&i.push(e)}),i.join("\n")}},{key:"cleanUpItems",value:function(t){var i=t.match(/(\[\w+\]\s*\[\/\w+\])/gi);return e.each(i,function(e){t=t.split(e).join("")}),t=i&&i.length>0?n.cleanUpItems(t):n.replaceEmptyLines(t)}},{key:"flattenNodes",value:function i(e,t){var n=document.createElement("div"),r=n,i=function o(e,t){for(var i=0;i<=e.length;i++){var a=e[i];if(a)if("BR"===a.nodeName)n.appendChild(document.createElement("div"));else{var s=a.className&&a.className.indexOf("wrapper")>-1;if("DIV"===a.nodeName&&!s){var l=n.childNodes[n.childNodes.length-1],c=!1;l&&(c=l.innerHTML.match(/^\s+$/g)),r=document.createElement("div"),n.appendChild(r)}a.className&&s?(n.appendChild(a),r=document.createElement("div"),n.appendChild(r),i--):a.childNodes&&a.childNodes.length?o(a.childNodes,!0):(3===a.nodeType&&(r===n&&(r=document.createElement("div"),n.appendChild(r)),a.nodeValue=a.nodeValue),r.appendChild(a),i--)}}};return i(t),n}}]),n}();return n=i}),n.module("morrr.editor.bbcode.AttributeParser",[],function(){var e,t=function(e){if(!e)return{};if("="===e[0])return{self:e.slice(1,e.length)};var t,n=!0,i=!1,r={},o="",a="",s=!1;for(var l in e){var c=e[l];"="===c&&(n=!1,r[o]="",i=!0),n&&c.match(/[a-z0-9_]/i)&&(o+=c),i&&(t?c!==t||s?"\\"!==c||s?(a+=c,s=!1):s=!0:(i=!1,n=!0,r[o]=a,t=!1,o="",a=""):c.match(/'|"/)&&(t=c))}return r};return e=t}),n.module("morrr.editor.bbcode.BBCodeEngine",["morrr.editor.bbcode.BBCodeExtractor","morrr.editor.utils.lodash","morrr.editor.bbcode.BBCodeHandlers","morrr.editor.utils"],function(e,t,n,i){var r,o={replaceEndTags:function(e){return t.each(n,function(t,n){t.tag&&(e=e.split("[/"+n+"]").join("</"+t.tag+">"))}),e},_injectSystemId:function(e,t){return e=i.stringInject(e,e.length-1,0,' id="'+t+'"')},_prepareInput:function(e){return e=e.replace(/\[row\]/g,"<div>"),e=e.replace(/\[\/row\]/g,"</div>"),e=e.replace(/\[\/br\]/g,"<div><br></div>"),e=this.replaceEndTags(e)},toProduction:function(i,r){r=r||{},i=this._prepareInput(i);var o=e(i);i=o.input;var a=o.codes;return t.each(a,function(e){var n;(n=$BBCodeHandlers[e.name])&&(t.isFunction(n.toProduction)?html=n.toProduction(e,r):html="<"+n.tag+">",i=i.replace(e.str,html))}),t.each(a,function(e){
var o;(o=n[e.name])&&t.isFunction(o.processAfterRender)&&(html=o.processAfterRender(i,e,r))}),i},toEditor:function(i,r){i=this._prepareInput(i);var o=e(i),a=this;i=o.input;var s=o.codes,l={};t.each(s,function(e){var r;if(r=n[e.name]){if(t.isFunction(r.toProduction)?html=r.toProduction(e):html="<"+r.tag+">",t.isFunction(r.bindEditorEvents)){var o="sane-element-"+e.attrs.p;html=a._injectSystemId(html,o),l[e.name]=l[e.name]||[],l[e.name].push(o)}i=i.replace(e.str,html)}});var c=$(i);r.content.append(c),t.each(l,function(e,i){t.each(e,function(e){var t=r.content.find("#"+e)[0];n[i].bindEditorEvents.apply(r,[t])})})}};return r=o}),n.module("morrr.editor.bbcode.BBCodeExtractor",["morrr.editor.bbcode.AttributeParser","morrr.editor.utils"],function(e,t){var n,i=function(n){for(var i=1,r=!1,o=!1,a=0;a<n.length;a++){var s=n[a];if("/"===s&&(r=!1),r){if(o&&"]"===s){var l=' p="'+i++ +'"';n=t.stringInject(n,a,0,l),a+=l.length-1,o=!1,r=!1}s.match(/[a-z0-9_]/i)&&(o=!0)}"["===s&&(r=!0)}var c=/\[([a-z0-9]+)\s?([^\]]+)?]/gim,d=c.execAll(n),u=[];return _.each(d,function(t){u.push({str:t[0],name:t[1],attrs:e(t[2])})}),{input:n,codes:u}};return n=i}),n.module("morrr.editor.bbcode.BBCodeHandlers",["morrr.editor.utils.Promise","morrr.editor.utils.lodash"],function(e,t){var i,r=n.requirePackage("morrr.editor.elements").then(function(e){var n={};return t.each(e,function(e,t){n[t.substring(22,t.length)]=e}),n});return i=r}),n.module("morrr.editor.bbcode.Generator",["morrr.editor.utils","morrr.editor.bbcode.BBCodeHandlers","morrr.editor.utils.lodash"],function(e,t,n){var i,r=function(i){var r=i.content.clone();n.each(t,function(e){e.toBBCode&&e.inline&&e.toBBCode.bind(i)(r)});var o=e.flattenNodes(i,r[0].childNodes);n.each(t,function(e){e.toBBCode&&!e.inline&&e.toBBCode.bind(i)($(o))});for(var a,s=[],l=!1,c=0;c<=o.childNodes.length;c++){var d=o.childNodes[c];if(d&&"X"!==d.nodeName){if(3===d.nodeType)if(d.nodeValue.match(/\[\S+\]/)){var u=i.trimText(d.nodeValue),p=u.match(/^\[(blockquote|gallery|intro|h3)/);if(s.push(u),p&&(l=!0,a)){var f=s[a];"[/br]"===f&&s.splice(a,1)}}else s.push("[row]"+i.trimText(d.nodeValue,!0)+"[/row]");if(1===d.nodeType){var u=i.trimText($(d).text(),!0),h=""===u.replace(/\[\/?[^\]]+(\]|$)/g,"");h&&(u=""),u.length>0&&(a=null,l=!1),l||(0===u.length?(s.push("[/br]"),a=s.length-1):s.push("[row]"+u+"[/row]")),l=!u}}}var m=e.cleanUpItems(s.join("\n"));return m};return i=r}),n.module("morrr.editor.elements.blockquote",[],function(){var e,t={index:1,tag:"blockquote",menu:!0,hint:"Quote",icon:"quote left",bindEditorEvents:function(e){this.basicStringWrapper(e,{service:"blockquote",onRemove:function(e){e.replaceWith("<div>"+e.find("blockquote").text()+"</div>")}})},toBBCode:function(e){var t=this;e.find('*[data-service="blockquote"]').each(function(e,n){var i=$(n).find(".wrapper-editable-area").text();$(n).replaceWith("[blockquote]"+t.trimText(i)+"[/blockquote]")})},cmdSmart:function(e){var n=$("<blockquote>"+e.text.join(" ")+"</blockquote>");$(e.elements).remove(),e.inject(n[0]),t.bindEditorEvents.apply(this,[n[0]])},toProduction:function(){return"<blockquote>"}};return e=t}),n.module("morrr.editor.elements.gallery",["morrr.editor.Gallery","morrr.editor.utils.lodash","morrr.editor.utils.sharedImagePath"],function(e,t,n){var i,r={tag:"div",hint:"Insert image gallery",icon:"picture",cmdSmart:function(i){var o=this;e(this,this.parentId,function(e){var a=['<div class="blog-gallery">'];t.each(e,function(e){a.push('<figure data-id="'+e+'"><img src="'+n(e)+'"></figure>')}),a.push("</div>");var s=$(a.join(""))[0];i.inject(s),r.bindEditorEvents.bind(o)(s)})},_bindFigure:function(e,t){var n=$('<i class="ui icon remove"></i>');n.appendTo(t),n.click(function(){$(e).find("figure").length<=1?$(e).fadeOut(function(){$(this).remove()}):$(this).parent("figure").fadeOut(function(){$(this).remove()})})},bindEditorEvents:function(i){var o=this,a=o.parentId;this.basicModuleWrapper(i,{service:"gallery",onReady:function(i){var s=$('<div class="placeholder"><img src="https://images.morrr.com/test-shit/pukka/4kgKwN2Ucx.png?width=150&height=150&mode=crop"/></div>');s.appendTo($(i).find(".blog-gallery")),s.click(function(){e(o,a,function(e){t.each(e,function(e){var t=$('<figure data-id="'+e+'"><img src="'+n(e)+'"/></figure>');t.insertBefore(s),r._bindFigure(i,t)})})}),$(i).find(".user-controls .remove").click(function(){$(i).remove()}),$(i).find("figure").each(function(e,t){r._bindFigure(i,t)})}})},toBBCode:function(e){e.find('*[data-service="gallery"]').each(function(e,t){var n=["[gallery]"];$(t).find("figure").each(function(e,t){n.push('[img id="'+$(t).data("id")+'"][/img]')}),n.push("[/gallery]"),$(t).replaceWith(n.join(""))})},toProduction:function(e){return'<div class="blog-gallery">'}};return i=r}),n.module("morrr.editor.elements.h3",[],function(){var e,t={tag:"h3",icon:"header",hint:"Heading",bindEditorEvents:function(e){this.basicStringWrapper(e,{service:"h3",onRemove:function(e){e.replaceWith("<div>"+e.find(".wrapper-editable-area").text()+"</div>")}})},toBBCode:function(e){var t=this;e.find('*[data-service="h3"]').each(function(e,n){var i=$(n).find(".wrapper-editable-area").text();$(n).replaceWith("[h3]"+t.trimText(i)+"[/h3]")})},cmdSmart:function(e){var n=$("<h3>"+e.text.join(" ")+"</h3>");$(e.elements).remove(),e.inject(n[0]),t.bindEditorEvents.apply(this,[n[0]])},toProduction:function(){return"<h3>"}};return e=t}),n.module("morrr.editor.elements.img",["morrr.editor.utils.lodash","morrr.editor.utils.sharedImagePath"],function(e,t){var n,i={tag:"figure",menu:!1,toProduction:function(n,i){i=i||{};var r=i.imageTitle,o=i.query,a=[];e.each(o,function(e,t){0===t.indexOf("img")&&a.push(t.split("img-")[1]+"="+e)}),a=a.join("&");var s=t(n.attrs.id)+(a?"?"+a:"");return'<figure data-id="'+n.attrs.id+'"><img '+(r?'alt="'+r+'" ':"")+'src="'+s+'">'}};return n=i}),n.module("morrr.editor.elements.innerad",[],function(){var e,t={tag:"div",menu:!1,toBBCode:function(e){},toProduction:function(e,t){var n=e.attrs,i=['<span class="recommended">'+n.caption+'</span><div class="blog-item"><a href="'+n.link+'"><figure class="profile-image">'];return i.push('<img src="'+n.img+'?width=525&height=450&mode=crop&quality=60"></img>'),i.push("<figcaption>"),i.push(' <span class="category" style="background-color: '+n.catcolor+';">'+n.catname+"</span>"),i.push('<h2 class="title">'+n.title+"</h2>"),i.push("</figcaption></figure></a></div>"),'<div class="blog-list article-inline-promo hide-desktop">'+i.join("")}};return e=t}),n.module("morrr.editor.elements.intro",[],function(){var e,t={tag:"div",menu:!0,stringWrapper:!0,icon:"info",hint:"Opening paragraph",bindEditorEvents:function(e){this.basicStringWrapper(e,{service:"intro",onRemove:function(e){e.replaceWith("<div>"+e.find(".wrapper-editable-area").text()+"</div>")}})},toBBCode:function(e){var t=this;e.find('*[data-service="intro"]').each(function(e,n){var i=$(n).find(".wrapper-editable-area").text();$(n).replaceWith("[intro]"+t.trimText(i)+"[/intro]")})},cmdSmart:function(e){var n=$('<div class="blog-intro">'+e.text.join(" ")+"</div>");$(e.elements).remove(),e.inject(n[0]),t.bindEditorEvents.apply(this,[n[0]])},toProduction:function(){return'<div class="blog-intro">'},processAfterRender:function(e,t,n){return e}};return e=t}),n.module("morrr.editor.elements.italic",[],function(){var e,t={tag:"i",menu:!0,inline:!0,icon:"italic",hint:"Italic",toBBCode:function(e){e.find("i").each(function(e,t){$(t).replaceWith("[i]"+$(t).text()+"[/i]")})},cmd:function(){this.execCommand("italic")}};return e=t}),n.module("morrr.editor.elements.link",[],function(){var e,t={tag:"a",menu:!0,inline:!0,icon:"linkify",hint:"Insert a link",toBBCode:function(e){e.find("a").each(function(e,t){$(t).replaceWith("[url="+$(t).attr("href")+"]"+$(t).text()+"[/url]")})},cmd:function(){var e=prompt("Please specify the link.");e&&this.execCommand("createLink",!1,e)},toProduction:function(e){var t=e.attrs.self;return t=t.replace(/\sp=.*/,""),-1===t.indexOf("http")&&(t="http://"+t),'<a target="_blank" href="'+t+'">'}};return e=t}),n.module("morrr.editor.elements.list",[],function(){var e,t={tag:"li",menu:!1,inline:!0,toBBCode:function(e){e.find("li").each(function(e,t){$(t).replaceWith("[li]"+$(t).html()+"[/li]")})}};return e=t}),n.module("morrr.editor.elements.ol",[],function(){var e,t={tag:"ol",menu:!0,inline:!0,icon:"ordered list",hint:"Ordered list",toBBCode:function(e){e.find("ol").each(function(e,t){$(t).replaceWith("[ol]"+$(t).html()+"[/ol]")})},cmd:function(){this.execCommand("insertorderedlist")},toProduction:function(e){return"<ol>"}};return e=t}),n.module("morrr.editor.elements.panorama",[],function(){var e,t={tag:"div",menu:!1,toBBCode:function(e){},toProduction:function(e,t){return'<div class="article-inline-ad hide-desktop">'}};return e=t}),n.module("morrr.editor.elements.strong",[],function(){var e,t={tag:"strong",menu:!1,inline:!0,icon:"bold",hint:"Bold",toBBCode:function(e){var t=this;e.find("b").each(function(e,n){$(n).replaceWith("[strong]"+t.trimText($(n).text())+"[/strong]")})},cmd:function(){this.execCommand("bold")}};return e=t}),n.module("morrr.editor.elements.ul",[],function(){var e,t={tag:"ul",menu:!0,inline:!0,icon:"unordered list",hint:"Unordered list",toBBCode:function(e){e.find("ul").each(function(e,t){$(t).replaceWith("[ul]"+$(t).html()+"[/ul]")})},cmd:function(){this.execCommand("insertunorderedlist")},toProduction:function(e){return"<ul>"}};return e=t}),n.module("morrr.editor.elements.unlink",[],function(){var e,t={menu:!0,inline:!0,icon:"unlink",hint:"Remove link",cmd:function(){this.execCommand("unlink",!1,[])}};return e=t})}(function(e){var t="undefined"!=typeof exports;return{isNode:t,realm:t?require("realm-js"):e.realm}}(this));